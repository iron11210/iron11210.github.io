<!-- build time:Wed Dec 17 2025 13:05:21 GMT+0800 (中国标准时间) --><!DOCTYPE html><script async src="https://www.googletagmanager.com/gtag/js?id=G-DPVE7Y0QX9"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DPVE7Y0QX9")</script><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="杂项笔记" href="http://example.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="杂项笔记" href="http://example.com/atom.xml"><link rel="alternate" type="application/json" title="杂项笔记" href="http://example.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="http://example.com/2025/01/03/game-engine/unity/unityBasics/%E5%B0%8F%E6%B1%BD%E8%BD%A6%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93(1)/"><title>小汽车项目总结(1) - unity基础 - unity - 游戏引擎 | IRON = 杂项笔记</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">小汽车项目总结(1)</h1><div class="meta"><span class="item" title="创建时间：2025-01-03 15:15:07"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2025-01-03T15:15:07+08:00">2025-01-03</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">IRON</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://dlink.host/wx4.sinaimg.cn/large/006Tzddnly8htqg1pgsrij30sg0sgtdo.jpg"></li><li class="item" data-background-image="https://dlink.host/wx1.sinaimg.cn/large/006Tzddnly8htqg0l4jv0j30sg0sgjuv.jpg"></li><li class="item" data-background-image="https://dlink.host/wx3.sinaimg.cn/large/006Tzddnly8htqg1arfzvj30sg0sg0x7.jpg"></li><li class="item" data-background-image="https://dlink.host/wx4.sinaimg.cn/large/006Tzddnly8htqg1pgsrij30sg0sgtdo.jpg"></li><li class="item" data-background-image="https://dlink.host/wx2.sinaimg.cn/large/006Tzddnly8htqg0x2lhcg3074074e7q.gif"></li><li class="item" data-background-image="https://dlink.host/wx2.sinaimg.cn/large/006Tzddnly8htqg1keshmj30sg0sgjvu.jpg"></li></ul></div><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div></header><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/game-engine/" itemprop="item" rel="index" title="分类于 游戏引擎"><span itemprop="name">游戏引擎</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/game-engine/unity/" itemprop="item" rel="index" title="分类于 unity"><span itemprop="name">unity</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/game-engine/unity/unityBasics/" itemprop="item" rel="index" title="分类于 unity基础"><span itemprop="name">unity基础</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/2025/01/03/game-engine/unity/unityBasics/%E5%B0%8F%E6%B1%BD%E8%BD%A6%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93(1)/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="IRON"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="杂项笔记"></span><div class="body md" itemprop="articleBody"><h2 id="一-生成世界随机地图模块"><a class="anchor" href="#一-生成世界随机地图模块">#</a> 一、生成世界随机地图模块</h2><h3 id="1-mathfperlinnoise源码推测"><a class="anchor" href="#1-mathfperlinnoise源码推测">#</a> 1. Mathf.PerlinNoise 源码推测</h3><p></p><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">PerlinNoise</span>(<span class="params"><span class="built_in">float</span> x, <span class="built_in">float</span> y</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> xi = Mathf.FloorToInt(x) &amp; <span class="number">255</span>;</span><br><span class="line">    <span class="built_in">int</span> yi = Mathf.FloorToInt(y) &amp; <span class="number">255</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> xf = x - Mathf.Floor(x);</span><br><span class="line">    <span class="built_in">float</span> yf = y - Mathf.Floor(y);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> u = Fade(xf);</span><br><span class="line">    <span class="built_in">float</span> v = Fade(yf);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> aa = Permutation[Permutation[xi] + yi];</span><br><span class="line">    <span class="built_in">int</span> ab = Permutation[Permutation[xi] + yi + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">int</span> ba = Permutation[Permutation[xi + <span class="number">1</span>] + yi];</span><br><span class="line">    <span class="built_in">int</span> bb = Permutation[Permutation[xi + <span class="number">1</span>] + yi + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> x1, x2, y1;</span><br><span class="line">    x1 = Mathf.Lerp(Grad(aa, xf, yf), Grad(ba, xf - <span class="number">1</span>, yf), u);</span><br><span class="line">    x2 = Mathf.Lerp(Grad(ab, xf, yf - <span class="number">1</span>), Grad(bb, xf - <span class="number">1</span>, yf - <span class="number">1</span>), u);</span><br><span class="line">    y1 = Mathf.Lerp(x1, x2, v);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (y1 + <span class="number">1</span>) * <span class="number">0.5f</span>; <span class="comment">// 将结果映射到 [0, 1]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Fade</span>(<span class="params"><span class="built_in">float</span> t</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> t * t * t * (t * (t * <span class="number">6</span> - <span class="number">15</span>) + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Grad</span>(<span class="params"><span class="built_in">int</span> hash, <span class="built_in">float</span> x, <span class="built_in">float</span> y</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> h = hash &amp; <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">float</span> u = h &lt; <span class="number">2</span> ? x : y;</span><br><span class="line">    <span class="built_in">float</span> v = h &lt; <span class="number">2</span> ? y : x;</span><br><span class="line">    <span class="keyword">return</span> ((h &amp; <span class="number">1</span>) == <span class="number">0</span> ? u : -u) + ((h &amp; <span class="number">2</span>) == <span class="number">0</span> ? v : -v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个常见的伪随机排列表</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">int</span>[] Permutation = &#123; ... &#125;; <span class="comment">// 省略完整表</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p></p><h3 id="2各个方法分析"><a class="anchor" href="#2各个方法分析">#</a> 2. 各个方法分析</h3><h4 id="21世界片段的生成与管理"><a class="anchor" href="#21世界片段的生成与管理">#</a> 2.1 世界片段的生成与管理</h4><ol><li>创建世界片段（圆柱体<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GenerateWorldPiece</span>(<span class="params"><span class="built_in">int</span> i</span>)</span>&#123; </span><br><span class="line">	<span class="comment">// 创建新的圆柱体，并将其存储在 pieces 数组中 </span></span><br><span class="line">	pieces[i] = CreateCylinder(); </span><br><span class="line">	<span class="comment">// 根据索引设置片段的位置</span></span><br><span class="line">	pieces[i].transform.Translate(Vector3.forward * (dimensions.y * scale * Mathf.PI) * i); </span><br><span class="line">	<span class="comment">// 更新片段，使其包含终点并能够移动 </span></span><br><span class="line">	UpdateSinglePiece(pieces[i]); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>创建圆柱形片段<br><strong>模块： <code>CreateCylinder</code></strong></li></ol><ul><li><strong>功能</strong>：<ul><li>创建一个圆柱形的世界片段，添加必要的组件（ <code>MeshFilter</code> 、 <code>MeshRenderer</code> 、 <code>MeshCollider</code> ）。</li><li>为圆柱体生成网格形状并赋予材质。</li></ul></li><li><strong>主要方法</strong>：<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> GameObject <span class="title">CreateCylinder</span>()</span>&#123; </span><br><span class="line">	<span class="comment">// 创建新的圆柱体并命名 </span></span><br><span class="line">	GameObject newCylinder = <span class="keyword">new</span> GameObject(); </span><br><span class="line">	newCylinder.name = <span class="string">&quot;World piece&quot;</span>; </span><br><span class="line">	<span class="comment">// 设置当前圆柱体为新创建的对象 </span></span><br><span class="line">	currentCylinder = newCylinder; </span><br><span class="line">	<span class="comment">// 添加 MeshFilter 和 MeshRenderer 组件 </span></span><br><span class="line">	MeshFilter meshFilter = newCylinder.AddComponent&lt;MeshFilter&gt;(); </span><br><span class="line">	MeshRenderer meshRenderer = newCylinder.AddComponent&lt;MeshRenderer&gt;(); </span><br><span class="line">	<span class="comment">// 为圆柱体设置材质 </span></span><br><span class="line">	meshRenderer.material = meshMaterial; </span><br><span class="line">	<span class="comment">// 生成网格并赋值 </span></span><br><span class="line">	meshFilter.mesh = Generate(); </span><br><span class="line">	<span class="comment">// 为圆柱体添加匹配网格的碰撞器 </span></span><br><span class="line">	newCylinder.AddComponent&lt;MeshCollider&gt;(); </span><br><span class="line">	<span class="keyword">return</span> newCylinder; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>为圆柱体生成实际网格并返回</li></ol><ul><li><strong>功能</strong>：<ul><li>为圆柱体生成实际的网格。</li><li>定义顶点、UV 坐标、三角形索引，构建一个 3D 几何体。</li><li>调用 <code>CreateShape</code> 完成网格顶点和形状的定义。</li></ul></li><li><strong>主要方法</strong>：<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Mesh <span class="title">Generate</span>()</span>&#123; </span><br><span class="line">	<span class="comment">// 创建并命名新网格 </span></span><br><span class="line">	Mesh mesh = <span class="keyword">new</span> Mesh(); </span><br><span class="line">	mesh.name = <span class="string">&quot;MESH&quot;</span>; </span><br><span class="line">	<span class="comment">// 初始化顶点、UV和三角形数组 </span></span><br><span class="line">	Vector3[] vertices = <span class="literal">null</span>; </span><br><span class="line">	Vector2[] uvs = <span class="literal">null</span>; </span><br><span class="line">	<span class="built_in">int</span>[] triangles = <span class="literal">null</span>; </span><br><span class="line">	<span class="comment">// 填充网格数据 </span></span><br><span class="line">	CreateShape(<span class="keyword">ref</span> vertices, <span class="keyword">ref</span> uvs, <span class="keyword">ref</span> triangles); </span><br><span class="line">	<span class="comment">// 为网格设置顶点、UV和三角形 </span></span><br><span class="line">	mesh.vertices = vertices; </span><br><span class="line">	mesh.uv = uvs; </span><br><span class="line">	mesh.triangles = triangles; </span><br><span class="line">	<span class="comment">// 重新计算法线 </span></span><br><span class="line">	mesh.RecalculateNormals(); </span><br><span class="line">	<span class="keyword">return</span> mesh; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="4"><li>计算顶点位置并基于柏林噪声修改高度<br><strong>模块： <code>CreateShape</code></strong></li></ol><ul><li><p><strong>功能</strong>：</p><ul><li>计算圆柱体的每个顶点位置，并基于 Perlin 噪声修改高度。</li><li>处理世界片段之间的平滑过渡，确保多个片段连接时没有明显的断裂。</li><li>根据顶点生成网格的 UV 坐标和三角形。<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreateShape</span>(<span class="params"><span class="keyword">ref</span> Vector3[] vertices, <span class="keyword">ref</span> Vector2[] uvs, <span class="keyword">ref</span> <span class="built_in">int</span>[] triangles</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取当前片段在x轴和z轴的大小</span></span><br><span class="line">    <span class="built_in">int</span> xCount = (<span class="built_in">int</span>)dimensions.x;</span><br><span class="line">    <span class="built_in">int</span> zCount = (<span class="built_in">int</span>)dimensions.y;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 初始化顶点数组和UV数组，根据片段的维度大小</span></span><br><span class="line">    vertices = <span class="keyword">new</span> Vector3[(xCount + <span class="number">1</span>) * (zCount + <span class="number">1</span>)];</span><br><span class="line">    uvs = <span class="keyword">new</span> Vector2[(xCount + <span class="number">1</span>) * (zCount + <span class="number">1</span>)];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">int</span> index = <span class="number">0</span>; <span class="comment">// 当前顶点索引</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取圆柱体的半径</span></span><br><span class="line">    <span class="built_in">float</span> radius = xCount * scale * <span class="number">0.5f</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 嵌套循环遍历x轴和z轴上的所有顶点</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> x = <span class="number">0</span>; x &lt;= xCount; x++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> z = <span class="number">0</span>; z &lt;= zCount; z++)&#123;</span><br><span class="line">            <span class="comment">// 计算顶点在圆柱上的角度</span></span><br><span class="line">            <span class="built_in">float</span> angle = x * Mathf.PI * <span class="number">2f</span> / xCount;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 使用角度的余弦和正弦值确定顶点位置</span></span><br><span class="line">            vertices[index] = <span class="keyword">new</span> Vector3(Mathf.Cos(angle) * radius, Mathf.Sin(angle) * radius, z * scale * Mathf.PI);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 更新UV坐标，用于纹理映射</span></span><br><span class="line">            uvs[index] = <span class="keyword">new</span> Vector2(x * scale, z * scale);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 根据Perlin噪声缩放和偏移值，计算用于噪声的x和z值</span></span><br><span class="line">            <span class="built_in">float</span> pX = (vertices[index].x * perlinScale) + offset;</span><br><span class="line">            <span class="built_in">float</span> pZ = (vertices[index].z * perlinScale) + offset;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 获取圆柱的中心位置，但保持z值不变，用于指向中心</span></span><br><span class="line">            Vector3 center = <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, vertices[index].z);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 根据Perlin噪声值和波浪高度，调整顶点向圆柱中心的移动</span></span><br><span class="line">            vertices[index] += (center - vertices[index]).normalized * Mathf.PerlinNoise(pX, pZ) * waveHeight;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 以下部分处理片段之间的平滑过渡：</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查是否有起始点（beginPoints）并且当前顶点位于网格的起始部分（z越小越靠近片段开头）</span></span><br><span class="line">            <span class="keyword">if</span>(z &lt; startTransitionLength &amp;&amp; beginPoints[<span class="number">0</span>] != Vector3.zero)&#123;</span><br><span class="line">                <span class="comment">// 计算当前顶点的Perlin噪声占比，越靠近新片段，噪声占比越高</span></span><br><span class="line">                <span class="built_in">float</span> perlinPercentage = z * (<span class="number">1f</span> / startTransitionLength);</span><br><span class="line">                <span class="comment">// 从起始点获取对应的顶点，但保持z值为当前顶点的z</span></span><br><span class="line">                Vector3 beginPoint = <span class="keyword">new</span> Vector3(beginPoints[x].x, beginPoints[x].y, vertices[index].z);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 将起始点和当前顶点通过线性插值结合，实现片段之间的平滑过渡</span></span><br><span class="line">                vertices[index] = (perlinPercentage * vertices[index]) + ((<span class="number">1f</span> - perlinPercentage) * beginPoint);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(z == zCount)&#123;</span><br><span class="line">                <span class="comment">// 如果当前顶点是最后一行顶点，更新起始点（beginPoints），以便下一个片段平滑连接</span></span><br><span class="line">                beginPoints[x] = vertices[index];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 随机在网格顶点位置生成物品（如障碍物或门）</span></span><br><span class="line">            <span class="keyword">if</span>(Random.Range(<span class="number">0</span>, startObstacleChance) == <span class="number">0</span> &amp;&amp; !(gate == <span class="literal">null</span> &amp;&amp; obstacles.Length == <span class="number">0</span>))</span><br><span class="line">                CreateItem(vertices[index], x);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 增加当前顶点索引</span></span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 初始化三角形数组（每个小方块由2个三角形组成，每个三角形由3个顶点组成，所以每个方块有6个顶点）</span></span><br><span class="line">    triangles = <span class="keyword">new</span> <span class="built_in">int</span>[xCount * zCount * <span class="number">6</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 用于构建方块的顶点索引基础</span></span><br><span class="line">    <span class="built_in">int</span>[] boxBase = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">6</span>];</span><br><span class="line">    <span class="built_in">int</span> current = <span class="number">0</span>; <span class="comment">// 当前三角形数组的索引</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 遍历x轴上的所有位置</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> x = <span class="number">0</span>; x &lt; xCount; x++)&#123;</span><br><span class="line">        <span class="comment">// 创建一个基础，用于填充当前x位置的一行方块</span></span><br><span class="line">        boxBase = <span class="keyword">new</span> <span class="built_in">int</span>[]&#123; </span><br><span class="line">            x * (zCount + <span class="number">1</span>), </span><br><span class="line">            x * (zCount + <span class="number">1</span>) + <span class="number">1</span>,</span><br><span class="line">            (x + <span class="number">1</span>) * (zCount + <span class="number">1</span>),</span><br><span class="line">            x * (zCount + <span class="number">1</span>) + <span class="number">1</span>,</span><br><span class="line">            (x + <span class="number">1</span>) * (zCount + <span class="number">1</span>) + <span class="number">1</span>,</span><br><span class="line">            (x + <span class="number">1</span>) * (zCount + <span class="number">1</span>),</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 遍历z轴上的所有位置</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> z = <span class="number">0</span>; z &lt; zCount; z++)&#123;</span><br><span class="line">            <span class="comment">// 增加基础顶点索引，移动到下一个方块的位置</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</span><br><span class="line">                boxBase[i] = boxBase[i] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 为当前方块添加两个三角形的顶点索引</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++)&#123;                    </span><br><span class="line">                triangles[current + j] = boxBase[j] - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 增加当前三角形数组的索引</span></span><br><span class="line">            current += <span class="number">6</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="22-过渡-片段之间更新"><a class="anchor" href="#22-过渡-片段之间更新">#</a> 2.2 过渡 片段之间更新</h4><ol><li>使连接更加丝滑<br><strong>模块： <code>UpdateWorldPieces</code></strong></li></ol><ul><li><p><strong>功能</strong>：</p><ul><li>移除不再显示的旧片段。</li><li>创建新的片段，衔接在当前场景的末端。</li><li>保证两个片段的边界平滑连接。</li><li>动态调整场景片段，形成 “无限滚动” 的效果。<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">UpdateWorldPieces</span>()</span>&#123; </span><br><span class="line">	<span class="comment">// 移除第一个片段（不再可见） </span></span><br><span class="line">	Destroy(pieces[<span class="number">0</span>]); </span><br><span class="line">	<span class="comment">// 将第二个片段赋值为第一个片段 </span></span><br><span class="line">	pieces[<span class="number">0</span>] = pieces[<span class="number">1</span>]; </span><br><span class="line">	<span class="comment">// 创建新的第二个片段 </span></span><br><span class="line">	pieces[<span class="number">1</span>] = CreateCylinder(); </span><br><span class="line">	<span class="comment">// 设置新片段的位置和旋转，保证与前一个片段衔接 </span></span><br><span class="line">	pieces[<span class="number">1</span>].transform.position = pieces[<span class="number">0</span>].transform.position + Vector3.forward * (dimensions.y * scale * Mathf.PI); </span><br><span class="line">	pieces[<span class="number">1</span>].transform.rotation = pieces[<span class="number">0</span>].transform.rotation; </span><br><span class="line">	<span class="comment">// 更新新生成的片段 </span></span><br><span class="line">	UpdateSinglePiece(pieces[<span class="number">1</span>]); </span><br><span class="line">	<span class="comment">// 等待一帧 </span></span><br><span class="line">	<span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="23-动态调整模块场景中的物品管理"><a class="anchor" href="#23-动态调整模块场景中的物品管理">#</a> 2.3 动态调整模块：场景中的物品管理</h4><ol><li><strong>模块： <code>UpdateAllItems</code></strong></li></ol><ul><li><p><strong>功能</strong>：</p><ul><li>找到所有带有标签 <code>Item</code> 的物品（如障碍物和门）。</li><li>判断物品是否接近玩家，若接近则显示物品。</li><li>对底部的物品开启阴影投射，上部物品则关闭阴影，避免不必要的阴影绘制。<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UpdateAllItems</span>()</span>&#123; </span><br><span class="line">	<span class="comment">// 查找所有带有 &quot;Item&quot; 标签的物体 </span></span><br><span class="line">	GameObject[] items = GameObject.FindGameObjectsWithTag(<span class="string">&quot;Item&quot;</span>); </span><br><span class="line">	<span class="comment">// 遍历所有物品 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; items.Length; i++)&#123; </span><br><span class="line">	<span class="comment">// 获取物品的所有 MeshRenderer 组件 </span></span><br><span class="line">		<span class="keyword">foreach</span>(MeshRenderer renderer <span class="keyword">in</span> items[i].GetComponentsInChildren&lt;MeshRenderer&gt;())&#123; </span><br><span class="line">			<span class="comment">// 判断物品是否足够接近玩家 </span></span><br><span class="line">			<span class="built_in">bool</span> show = items[i].transform.position.z &lt; showItemDistance; </span><br><span class="line">			<span class="comment">// 如果需要显示物品，更新阴影投射模式 </span></span><br><span class="line">			<span class="comment">// 圆柱体世界中，仅底部的物体需要投射阴影 </span></span><br><span class="line">			<span class="keyword">if</span>(show) renderer.shadowCastingMode = (items[i].transform.position.y &lt; shadowHeight) ? ShadowCastingMode.On : ShadowCastingMode.Off; </span><br><span class="line">			<span class="comment">// 根据是否展示物品启用或禁用 </span></span><br><span class="line">			Renderer renderer.enabled = show; </span><br><span class="line">		&#125; </span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ol start="2"><li><strong>模块： <code>CreateItem</code></strong></li></ol><ul><li><p><strong>功能</strong>：</p><ul><li>根据随机概率在片段上生成物品（障碍物或门）。</li><li>将物品位置设置在网格的某些顶点处。</li><li>确保物品的朝向正确，使其面向圆柱体中心。<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreateItem</span>(<span class="params">Vector3 vert, <span class="built_in">int</span> x</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取圆柱体的中心位置，但保持z值与顶点的z值一致</span></span><br><span class="line">    Vector3 zCenter = <span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, vert.z);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查中心点与顶点之间是否有正确的角度</span></span><br><span class="line">    <span class="comment">// 如果向量为零或顶点位于圆柱体的四分之一或四分之三处（特定位置），则不生成物品</span></span><br><span class="line">    <span class="keyword">if</span>(zCenter - vert == Vector3.zero || x == (<span class="built_in">int</span>)dimensions.x / <span class="number">4</span> || x == (<span class="built_in">int</span>)dimensions.x / <span class="number">4</span> * <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据随机概率生成新物品，有小概率生成门（gate），大概率生成障碍物</span></span><br><span class="line">    GameObject newItem = Instantiate((Random.Range(<span class="number">0</span>, gateChance) == <span class="number">0</span>) ? gate : obstacles[Random.Range(<span class="number">0</span>, obstacles.Length)]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将物品朝向圆柱体中心方向旋转</span></span><br><span class="line">    newItem.transform.rotation = Quaternion.LookRotation(zCenter - vert, Vector3.up);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置物品的位置为当前顶点位置</span></span><br><span class="line">    newItem.transform.position = vert;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将新生成的物品设置为当前圆柱体的子物体，以便随圆柱体一起移动和旋转</span></span><br><span class="line">    newItem.transform.SetParent(currentCylinder.transform, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="24-场景控制模块片段的移动与过渡"><a class="anchor" href="#24-场景控制模块片段的移动与过渡">#</a> 2.4 场景控制模块：片段的移动与过渡</h4><ol><li><strong>模块： <code>UpdateSinglePiece</code></strong></li></ol><ul><li><p><strong>功能</strong>：</p><ul><li>为片段添加移动功能，使其沿 <code>z</code> 轴向玩家方向移动。</li><li>根据灯光的旋转速度设置片段的旋转速度。</li><li>更新 Perlin 噪声的偏移量，确保每个片段的地形独特。</li><li>动态调整障碍物的出现概率，增加游戏难度。<br><figure class="highlight c#"><figcaption><span>row</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UpdateSinglePiece</span>(<span class="params">GameObject piece</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 为新生成的片段添加基础移动脚本，使其向玩家方向移动</span></span><br><span class="line">    BasicMovement movement = piece.AddComponent&lt;BasicMovement&gt;();</span><br><span class="line">    <span class="comment">// 设置移动速度为全局速度的负值（向玩家方向移动）</span></span><br><span class="line">    movement.movespeed = -globalSpeed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果灯光（Directional Light）有移动脚本，则设置片段的旋转速度与灯光的旋转速度一致</span></span><br><span class="line">    <span class="keyword">if</span>(lampMovement != <span class="literal">null</span>)</span><br><span class="line">        movement.rotateSpeed = lampMovement.rotateSpeed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为当前片段创建一个终点对象，用于标记片段的末尾</span></span><br><span class="line">    GameObject endPoint = <span class="keyword">new</span> GameObject();</span><br><span class="line">    <span class="comment">// 设置终点的位置为片段当前位置加上z轴方向的偏移量</span></span><br><span class="line">    endPoint.transform.position = piece.transform.position + Vector3.forward * (dimensions.y * scale * Mathf.PI);</span><br><span class="line">    <span class="comment">// 将终点设置为当前片段的子物体</span></span><br><span class="line">    endPoint.transform.parent = piece.transform;</span><br><span class="line">    <span class="comment">// 为终点命名</span></span><br><span class="line">    endPoint.name = <span class="string">&quot;End Point&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加Perlin噪声的偏移量，确保每个片段的地形形状不同</span></span><br><span class="line">    offset += randomness;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 减小障碍物生成的概率，随着时间推移增加障碍物的密度</span></span><br><span class="line">    <span class="keyword">if</span>(startObstacleChance &gt; <span class="number">5</span>)</span><br><span class="line">        startObstacleChance -= obstacleChanceAcceleration;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="3一些理解"><a class="anchor" href="#3一些理解">#</a> 3. 一些理解</h3><p>实现方案：地图为两个圆柱体进行嵌套，使整个场景达成了一种伪无限的效果，并且由于柏林噪声的平滑随机性，使圆柱体中的地形会有一些波动。所以在一开始创建了顶点、uv 三角形的数组后通过计算角度将数值注入数组，并通过柏林噪声以及传入值 waveHeight 波动圆柱体表面的数组值以达成总体圆柱体但是细节有坡度的效果。</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-01-03 23:44:28" itemprop="dateModified" datetime="2025-01-03T23:44:28+08:00">2025-01-03</time> </span><span id="2025/01/03/game-engine/unity/unityBasics/小汽车项目总结(1)/" class="item leancloud_visitors" data-flag-title="小汽车项目总结(1)" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="IRON 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="IRON 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="IRON 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>IRON <i class="ic i-at"><em>@</em></i>杂项笔记</li><li class="link"><strong>本文链接：</strong> <a href="http://example.com/2025/01/03/game-engine/unity/unityBasics/%E5%B0%8F%E6%B1%BD%E8%BD%A6%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93(1)/" title="小汽车项目总结(1)">http://example.com/2025/01/03/game-engine/unity/unityBasics/小汽车项目总结(1)/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/12/16/computer/dataStructure/hello-world/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;dlink.host&#x2F;wx4.sinaimg.cn&#x2F;large&#x2F;006Tzddnly8htqg1pgsrij30sg0sgtdo.jpg" title="算法基础总结"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 数据结构</span><h3>算法基础总结</h3></a></div><div class="item right"><a href="/2025/01/17/game-engine/unity/unityProject01/%E6%8A%80%E8%83%BD%E7%B3%BB%E7%BB%9F01(Skill%20part)/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;dlink.host&#x2F;wx3.sinaimg.cn&#x2F;large&#x2F;006Tzddnly8htqg1arfzvj30sg0sg0x7.jpg" title="技能系统01(Skill part)"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 从零开始的恶魔城开发</span><h3>技能系统01(Skill part)</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E7%94%9F%E6%88%90%E4%B8%96%E7%95%8C%E9%9A%8F%E6%9C%BA%E5%9C%B0%E5%9B%BE%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">一、生成世界随机地图模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-mathfperlinnoise%E6%BA%90%E7%A0%81%E6%8E%A8%E6%B5%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1. Mathf.PerlinNoise 源码推测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E5%90%84%E4%B8%AA%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-number">1.2.</span> <span class="toc-text">2. 各个方法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21%E4%B8%96%E7%95%8C%E7%89%87%E6%AE%B5%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 世界片段的生成与管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-%E8%BF%87%E6%B8%A1-%E7%89%87%E6%AE%B5%E4%B9%8B%E9%97%B4%E6%9B%B4%E6%96%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 过渡 片段之间更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-%E5%8A%A8%E6%80%81%E8%B0%83%E6%95%B4%E6%A8%A1%E5%9D%97%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E7%89%A9%E5%93%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 动态调整模块：场景中的物品管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24-%E5%9C%BA%E6%99%AF%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9D%97%E7%89%87%E6%AE%B5%E7%9A%84%E7%A7%BB%E5%8A%A8%E4%B8%8E%E8%BF%87%E6%B8%A1"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 场景控制模块：片段的移动与过渡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3"><span class="toc-number">1.3.</span> <span class="toc-text">3. 一些理解</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2024/08/03/game-engine/unity/unityBasics/unity%E4%B8%AD%E5%9F%BA%E6%9C%AC%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8-2/" rel="bookmark" title="unity中基本类的使用-2">unity中基本类的使用-2</a></li><li><a href="/2024/08/03/game-engine/unity/unityBasics/unity%E4%B8%AD%E6%93%8D%E4%BD%9C%E6%8E%A7%E5%88%B6/" rel="bookmark" title="unity中操作控制">unity中操作控制</a></li><li><a href="/2024/08/03/game-engine/unity/unityBasics/%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="bookmark" title="基本方法的使用">基本方法的使用</a></li><li><a href="/2024/08/03/game-engine/unity/unityBasics/%E6%9F%8F%E6%9E%97%E5%99%AA%E5%A3%B0/" rel="bookmark" title="柏林噪声">柏林噪声</a></li><li><a href="/2024/08/04/game-engine/unity/unityBasics/unity%E4%B8%AD%E5%9F%BA%E6%9C%AC%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8/" rel="bookmark" title="unity中基本类的使用">unity中基本类的使用</a></li><li><a href="/2024/08/05/game-engine/unity/unityBasics/unity%E4%B8%AD%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" rel="bookmark" title="unity中工具使用">unity中工具使用</a></li><li><a href="/2024/09/04/game-engine/unity/unityBasics/%E4%B8%80%E4%BA%9B%E5%8A%9F%E8%83%BD%E5%92%8C%E4%B8%8D%E6%87%82%E7%9A%84%E7%82%B9%E7%9A%84%E8%AE%B0%E5%BD%95/" rel="bookmark" title="一些功能和不懂的点的记录">一些功能和不懂的点的记录</a></li><li><a href="/2024/09/06/game-engine/unity/unityBasics/%E7%9B%B8%E6%9C%BA%E8%B7%9F%E9%9A%8F%E5%92%8C%E8%83%8C%E6%99%AF%E7%A7%BB%E5%8A%A8/" rel="bookmark" title="一些功能和不懂的点的记录">一些功能和不懂的点的记录</a></li><li><a href="/2024/09/12/game-engine/unity/unityBasics/%E7%8A%B6%E6%80%81%E6%9C%BA/" rel="bookmark" title="状态机">状态机</a></li><li><a href="/2024/11/07/game-engine/unity/unityBasics/Mesh%E7%9A%84%E4%BD%BF%E7%94%A8%20%E6%B1%BD%E8%BD%A6%E5%9C%B0%E5%BD%A2%E5%88%9B%E5%BB%BA/" rel="bookmark" title="Mesh的使用 汽车地形创建">Mesh的使用 汽车地形创建</a></li><li><a href="/2024/11/10/game-engine/unity/unityBasics/%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F/" rel="bookmark" title="摄像机跟随">摄像机跟随</a></li><li class="active"><a href="/2025/01/03/game-engine/unity/unityBasics/%E5%B0%8F%E6%B1%BD%E8%BD%A6%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93(1)/" rel="bookmark" title="小汽车项目总结(1)">小汽车项目总结(1)</a></li><li><a href="/2025/11/11/game-engine/unity/AssetBundle/Profiler%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/" rel="bookmark" title="Profiler性能分析工具">Profiler性能分析工具</a></li><li><a href="/2025/11/12/game-engine/unity/AssetBundle/Builder%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0%E4%B9%8B%E4%B8%80%20Collect/" rel="bookmark" title="Builder核心函数之一 Collect">Builder核心函数之一 Collect</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="IRON" data-src="/images/avatar.jpg"><p class="name" itemprop="name">IRON</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">141</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">20</span> <span class="name">分类</span></a></div></nav><div class="social"><span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTU1MDgyNDI1Nw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;550824257"><i class="ic i-cloud-music"></i></span> <a href="/zhouy6577@gmail.com" title="zhouy6577@gmail.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>主页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>links</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/12/16/computer/dataStructure/hello-world/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2025/01/17/game-engine/unity/unityProject01/%E6%8A%80%E8%83%BD%E7%B3%BB%E7%BB%9F01(Skill%20part)/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/front/" title="分类于 前端">前端</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/front/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/2024/10/01/computer/front/JavaScript/hello-world/" title="Hello World">Hello World</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/ComputationalGeometry/" title="分类于 计算几何">计算几何</a></div><span><a href="/2025/05/24/computer/ComputationalGeometry/lec8%20Arrangements%20and%20Duality/" title="lec8 Arrangements and Duality">lec8 Arrangements and Duality</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="分类于 游戏引擎">游戏引擎</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/" title="分类于 unity">unity</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/unityBasics/" title="分类于 unity基础">unity基础</a></div><span><a href="/2024/11/10/game-engine/unity/unityBasics/%E6%91%84%E5%83%8F%E6%9C%BA%E8%B7%9F%E9%9A%8F/" title="摄像机跟随">摄像机跟随</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/DataAnalyze/" title="分类于 数据分析">数据分析</a></div><span><a href="/2025/06/02/computer/DataAnalyze/lec8%20Principles%20ofData%20Science%20-%20%E5%89%AF%E6%9C%AC%20(2)/" title="lec7 Principles ofData Science">lec7 Principles ofData Science</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/front/" title="分类于 前端">前端</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/front/prattle/" title="分类于 杂谈">杂谈</a></div><span><a href="/2024/03/01/computer/front/prattle/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%EF%BC%88%E9%80%9A%E8%BF%87js%E6%9D%A5%E5%AE%9E%E7%8E%B0%E7%80%91%E5%B8%83%E6%B5%81%EF%BC%89/" title="js实现瀑布流">js实现瀑布流</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="分类于 游戏引擎">游戏引擎</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/" title="分类于 unity">unity</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/unityBasics/" title="分类于 unity基础">unity基础</a></div><span><a href="/2024/11/07/game-engine/unity/unityBasics/Mesh%E7%9A%84%E4%BD%BF%E7%94%A8%20%E6%B1%BD%E8%BD%A6%E5%9C%B0%E5%BD%A2%E5%88%9B%E5%BB%BA/" title="Mesh的使用 汽车地形创建">Mesh的使用 汽车地形创建</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/ComputationalGeometry/" title="分类于 计算几何">计算几何</a></div><span><a href="/2025/05/25/computer/ComputationalGeometry/lec10%20%E5%87%A0%E4%BD%95%E9%80%BC%E8%BF%91%E7%AE%97%E6%B3%95(Geometric%20approximation%20algorithms)/" title="lec10 几何逼近算法 (Geometric approximation algorithms)">lec10 几何逼近算法 (Geometric approximation algorithms)</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2025/12/06/game-engine/unity/%E9%9D%A2%E7%BB%8F/%E5%90%88%E8%82%A5%E5%B8%B8%E6%98%A5%E8%97%A4/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer/database/" title="分类于 数据库">数据库</a></div><span><a href="/2024/09/29/computer/database/lec_6%20Advanced%20SQL/" title="lec_6 Advanced SQL">lec_6 Advanced SQL</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="分类于 游戏引擎">游戏引擎</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/" title="分类于 unity">unity</a> <i class="ic i-angle-right"></i> <a href="/categories/game-engine/unity/unityBasics/" title="分类于 unity基础">unity基础</a></div><span><a href="/2024/08/03/game-engine/unity/unityBasics/%E6%9F%8F%E6%9E%97%E5%99%AA%E5%A3%B0/" title="柏林噪声">柏林噪声</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">IRON @ IRON</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2025/01/03/game-engine/unity/unityBasics/小汽车项目总结(1)/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->